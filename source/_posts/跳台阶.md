---
title: 跳台阶
date:  2017-3-1
tags: 算法
category: Java
---
跳台阶题目如下：

> 一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法。

变态跳台阶题目如下：

> 一只青蛙一次可以跳上1级台阶，也可以跳上2级……它也可以跳上n级。求该青蛙跳上一个n级的台阶总共有多少种跳法。

这两个题目原理都是一样的，理解了第一个题目的求解原理，第二个也就不难解决。

<!--more-->
## 思路分析
一开始我看到第一题时没有什么思路的，这种情况下我使用了一个笨方法。我知道这个题目应该是有规律的，所以我简单计算了一二三四级台阶有几种跳法，结果为1,2,3,5种跳法。

这时候简单看一下发现有点像斐波那契数列，简单验证了一下，发现没遇到什么问题，于是写了简单的代码，测试也通过了。
```java
public int JumpFloor(int target) {
	if(target<=0) throw new IllegalArgumentException();
	if(target==1) return 1;
	if(target==2) return 2;
	return JumpFloor(target-1)+JumpFloor(target-2);
}
```
接下来的问题就很尴尬了，为什么`f(n)=f(n-1)+f(n-2)`。

要理解这个问题也不是很难，我们先来考虑如何到达第n层阶梯，无外乎两种方式：
1. 在第n-1层跳一步
2. 在第n-2层跳两步

所以到第n层问题被转换为到第n-1层加上到第n-2层的子问题。

一开始我在思考这个问题的时候，逻辑上陷入了一个误区，认为f(n-1)和f(n-2)之间会有重复的跳跃。有时候思维陷入误区就是很怪，首先n-1和n-2台阶总数都不一样，肯定不会有相同的跳跃方式，就算使用了相同的跳跃方式最后一步一个跳二一个跳一，这样也会成为不同的跳跃方式。

然后就是代码的优化，这实质上和斐波那契数列没有区别，此处不在讨论，有兴趣可以参看前面的文章。

## 变态跳台阶
上述代码的逻辑理清楚了，我们同理可以推测出变态跳台阶的解法：

**f(n)=f(1)+f(2)+...+f(n-1)**

直接依据这个函数去写代码还是很麻烦的，我们可以使用在斐波那契数列中添加缓存的方法，然后将缓存的数据相加即可。

另一种是我们可以先化简函数，然后计算。

**f(n)=f(1)+f(2)+...+f(n-2)+f(n-1)**
**f(n-1)=f(1)+f(2)+...+f(n-2)**
**f(n)=2*f(n-1)**
同理得
**f(n)=2\*2\*f(n-2)**
递推得
**f(n)=2^x^\*f(n-x)**
**f(n)=2^n-1^\*f(1)**

代码如下：
```java
public int JumpFloorII(int target) {
	if (target <= 0) throw new IllegalArgumentException();
	return (int) Math.pow(2, target-1);
}
```
此处使用了Java JDK自带的库，也可替换实现，如果要替换的话，最简单的优化就是添加缓存，没必要每次都从头开始计算。

