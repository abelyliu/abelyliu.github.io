---
title: 欧拉计划1
date:  2017-3-6
tags: 算法,欧拉计划
category: 
---
Multiples of 3 and 5

> If we list all the natural numbers below 10 that are multiples of 3 or  5, we get 3, 5, 6 and 9. The sum of these multiples is 23.
> 
> Find the sum of all the multiples of 3 or 5 below 1000.

这题就是求解3或5的所有倍数和，且3或5的倍数要小于1000。此题的结果为233168。

<!--more-->
## 遍历法
我们可以从3遍历到999，如果这个数能整除3或5则累加。
```java
    public static int sumOfThreeAndFive(int maxNum) {
        int sum = 0;
        for (int i = 3; i < maxNum; i++) {
            if (i % 3 == 0 || i % 5 == 0) sum = sum + i;
        }
        return sum;
    }
```
## 小改进
上面的代码思路是判断一个数是不是3或者5的倍数，如果是则累加。我们可以倒过来思考，我们直接求解3和5的倍数，然后把这些数加起来，但是要注意3和5的公倍数被多加了一次。
```java
    public static int sumOfThreeAndFive(int maxNum) {
        int sum = 0;
        int i = 0;
        while (true) {
            i++;
            if ((i * 3) >= maxNum) break;
            if ((i * 5) < maxNum && i % 3 != 0) sum = sum + (i * 5);
            sum = sum + (i * 3);
        }
        return sum;
    }
```
## 进一步改进
上面的思路是求解所有3和5所有的倍数然后减去公倍数。
3的倍数和=3\*1+3\*2+...+3\*x
5的倍数和=5\*1+5\*2+...+5\*y
15的倍数和=15\*1+...+15\*z
结果为f(3)+f(5)-f(15)。接下来让我们化简函数：
f(3)=3(1+2+...+x)
      =3\*x\*(1+x)/2
类似的
f(5)=5\*y\*(1+y)/2
f(15)=15\*z\*(1+z)/2

换句话说我们只需要直到x,y,z就可以得到这三个值。代码如下：
```java
    public static int sumOfThreeAndFive(int maxNum) {
        int sum = 0;
        int multiplyOfThreeNum = (maxNum - 1) / 3;
        int multiplyOfFiveNum = (maxNum - 1) / 5;
        int multiplyOfFifteenNum = (maxNum - 1) / 15;

        int multiplyOfThreeSum = multiplyOfThreeNum * 3 * (1 + multiplyOfThreeNum) / 2;
        int multiplyOfFiveSum = multiplyOfFiveNum * 5 * (1 + multiplyOfFiveNum) / 2;
        int multiplyOfFifteenSum = multiplyOfFifteenNum * 15 * (1 + multiplyOfFifteenNum) / 2;

        sum = multiplyOfThreeSum + multiplyOfFiveSum - multiplyOfFifteenSum;
        return sum;
    }
```
上述代码要注意的一点在于：**求x,y,z时使用maxNum - 1而不是maxNum。**