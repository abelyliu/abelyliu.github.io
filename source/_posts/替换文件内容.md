---
title: 替换文件内容
date: 2016-11-23 09:42:21
tags: Java
category: Java
---
因为一些原因，需要向文本文件内插入一些数据，结果从[Stack Overflow](http://stackoverflow.com/questions/3935791/find-and-replace-words-lines-in-a-file)找到了比较简洁的解决方案。
<!--more-->

## Java7解决方案
```java
Path path = Paths.get("test.txt");
Charset charset = StandardCharsets.UTF_8;

String content = new String(Files.readAllBytes(path), charset);
content = content.replaceAll("foo", "bar");
Files.write(path, content.getBytes(charset));
```
这种方法适用于文件比较小，而且代码比较容易理解

## Java7以前解决方案
```java
String content = IOUtils.toString(new FileInputStream(myfile), myencoding);
content = content.replaceAll(myPattern, myReplacement);
IOUtils.write(content, new FileOutputStream(myfile), myencoding);
```
这里的IOUtils是apache common io包里面的。如果使用java原生的api实现的思路也是类似，先建一个缓存文件，然后读取判断每一行是否包含字符串，如果包含替换字符串，写入，最后将缓存文件修改为源文件。
